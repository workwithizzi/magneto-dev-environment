#!/bin/bash
#
source bin/utils
CONTAINER=$CONT_MAGENTO

[ -z "$1" ] && print_error "Please specify a directory or file to copy from container (ex. vendor, --all)" && exit

REAL_SRC=$(cd -P "src" && pwd)

if [ "$1" == "--all" ]; then
  docker cp "$(docker-compose ps -q "$CONTAINER"|awk '{print $1}')":/var/www/html/./ "$REAL_SRC"/
  print_success "Completed copying all files from container to host"
else
  if [ -f "$1" ] ; then
    docker cp "$(docker-compose ps -q "$CONTAINER"|awk '{print $1}')":/var/www/html/"$1" "$REAL_SRC/$1"
  else
    docker cp "$(docker-compose ps -q "$CONTAINER"|awk '{print $1}')":/var/www/html/"$1" "$REAL_SRC/$(dirname "$1")"
  fi
  print_success "Completed copying $1 from container to host"
fi
