#!/bin/bash
source bin/utils
# TODO: Update this to have separate commands for core and wip

[ -z "$1" ] && echo "Please specify a directory or file to copy from container (ex. vendor, --all)" && exit

REAL_WIP=$(cd -P "$WIP_DIR" && pwd)
if [ "$1" == "--all" ]; then
  docker cp $(docker-compose ps -q phpfpm|awk '{print $1}'):/var/www/html/./ $REAL_WIP/
  echo "Completed copying all files from container to host"
else
  if [ -f "$1" ] ; then
    docker cp $(docker-compose ps -q phpfpm|awk '{print $1}'):/var/www/html/$1 $REAL_WIP/$1
  else
    docker cp $(docker-compose ps -q phpfpm|awk '{print $1}'):/var/www/html/$1 $REAL_WIP/$(dirname $1)
  fi
  echo "Completed copying $1 from container to host"
fi
